<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <title>Coupe's log</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
  <style>
    .top-bar {
    position: absolute;
    top: 15px;
    right: 20px;
    }
    .nav-links {
    display: flex;
    align-items: center;
    gap: 20px;
    }

.nav-link {
  color: white;
  text-decoration: none;
  font-weight: 500;
  font-size: 1rem;
  border-bottom: 2px solid transparent;
  transition: border-color 0.2s;
  background: none;
  padding: 0;
}

.nav-link:hover {
  border-bottom: 2px solid white;
}

/* 버튼을 링크처럼 보이게 (로그아웃 버튼 전용) */
.btn-link {
  background: none;
  border: none;
  cursor: pointer;
}
    /* 카테고리 스타일 (HongLab 참고) */
    .category-link {
      color: white;
      text-decoration: none;
      padding: 5px 0;
      border-bottom: 2px solid transparent;
      transition: border-color 0.2s;
    }
    .category-link:hover {
      border-bottom: 2px solid white;
    }

    /* 로그인/로그아웃 버튼 */
    .auth-btn {
      background: none;
      border: none;
      font-weight: 600;
      cursor: pointer;
      padding: 0;
    }
    .auth-btn:hover {
      color: #ffaa33;
      text-decoration: underline;
    }
  </style>
</head>
<body>
<div class="p-5 mb-5 text-white bg-dark position-relative"
     style="background: url('/images/logo2.jpg') no-repeat center center/cover; height: 250px;">

  <div class="top-bar">
    <!-- 카테고리 링크 + 로그인/로그아웃 버튼 묶음 -->
    <div class="nav-links">
      <!-- 카테고리 링크 -->
      <a th:each="cat : ${categories}"
         th:href="@{/category/{c}(c=${cat})}"
         th:text="${cat.label}"
         class="nav-link">
      </a>

      <!-- 로그인/로그아웃 버튼 영역: 여기 id="auth-area"로 두고 JS로 동적 생성 -->
      <div id="auth-area" class="nav-link"></div>
    </div>
  </div>


  <!-- 가운데 로고/타이틀 -->
  <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
    <h1 class="mb-3">
      <a th:href="@{/ }" style="color: white; text-decoration: none;">Coupelog</a>
    </h1>
    <h4 class="mb-3">Game, Dev, Sports, etc...</h4>
  </div>
</div>

<div class="container">
  <!-- 글 등록 버튼 -->
  <button th:if="${#authentication != null and #authentication.authenticated}"
          type="button" id="create-btn"
          th:onclick="|location.href='@{/new-article}'|"
          class="btn btn-secondary btn-sm mb-4">글 등록</button>

  <!-- row 한 번만 선언 -->
  <div class="row">
    <!-- 3열: col-md-4 (12/4=3) -->
    <div class="col-md-4 mb-4" th:each="item : ${articles}">
      <div class="card h-100">
        <div class="card-header text-center">
          <span th:text="${item.id}"></span>
        </div>
        <div class="card-body">
          <h5 class="card-title text-truncate" th:text="${item.title}"></h5>
          <p class="card-text text-truncate"
             style="max-height: 3rem; overflow: hidden;"
             th:text="${item.content}">
          </p>
        </div>
        <div class="card-footer text-center">
          <a th:href="@{/articles/{id}(id=${item.id})}" class="btn btn-primary btn-sm">보러가기</a>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="/js/token.js"></script>
<script src="/js/article.js"></script>
</body>
</html>
