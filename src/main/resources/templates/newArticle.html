<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8">
  <title>Coupe's log</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
  <style>
    .top-bar {
    position: absolute;
    top: 15px;
    right: 20px;
    }
    .nav-links {
    display: flex;
    align-items: center;
    gap: 20px;
    }

.nav-link {
  color: white;
  text-decoration: none;
  font-weight: 500;
  font-size: 1rem;
  border-bottom: 2px solid transparent;
  transition: border-color 0.2s;
  background: none;
  padding: 0;
}

.nav-link:hover {
  border-bottom: 2px solid white;
}

/* 버튼을 링크처럼 보이게 (로그아웃 버튼 전용) */
.btn-link {
  background: none;
  border: none;
  cursor: pointer;
}
    /* 카테고리 스타일 (HongLab 참고) */
    .category-link {
      color: white;
      text-decoration: none;
      padding: 5px 0;
      border-bottom: 2px solid transparent;
      transition: border-color 0.2s;
    }
    .category-link:hover {
      border-bottom: 2px solid white;
    }

    /* 로그인/로그아웃 버튼 */
    .auth-btn {
      background: none;
      border: none;
      font-weight: 600;
      cursor: pointer;
      padding: 0;
    }
    .auth-btn:hover {
      color: #ffaa33;
      text-decoration: underline;
    }
  </style>
</head>
<body>
<div class="p-5 mb-5 text-white bg-dark position-relative"
     style="background: url('/images/logo2.jpg') no-repeat center center/cover; height: 250px;">

  <div class="top-bar">
    <!-- 카테고리 링크 + 로그인/로그아웃 버튼 묶음 -->
    <div class="nav-links">
      <!-- 카테고리 링크 -->
      <a th:each="cat : ${categories}"
         th:href="@{/category/{c}(c=${cat})}"
         th:text="${cat.label}"
         class="nav-link">
      </a>

      <!-- 로그인 상태일 때만 로그아웃 -->
      <div sec:authorize="isAuthenticated()">
        <form th:action="@{/logout}" method="post" style="display:inline;">
          <button type="submit" class="nav-link btn-link">로그아웃</button>
        </form>
      </div>

      <!-- 로그아웃 상태일 때만 로그인 -->
      <div sec:authorize="isAnonymous()">
        <a th:href="@{/login}" class="nav-link">로그인</a>
      </div>
    </div>
  </div>


  <!-- 가운데 로고/타이틀 -->
  <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
    <h1 class="mb-3">
      <a th:href="@{/ }" style="color: white; text-decoration: none;">Coupelog</a>
    </h1>
    <h4 class="mb-3">Game, Dev, Sports, etc...</h4>
  </div>
</div>


<div class="container mt-5">
  <div class="row">
    <div class="col-lg-8">
      <article>
        <input type="hidden" id="article-id" th:value="${article.id}">
        <!-- 카테고리 선택 -->
        <div class="mb-3">
          <label for="category" class="form-label">카테고리 선택</label>
          <select id="category" class="form-select">
            <option th:each="cat : ${categories}"
                    th:value="${cat.name()}"
                    th:text="${cat.label}"
                    th:selected="${article.category != null} ? ${cat.name()} == ${article.category.name()} : false">
            </option>
          </select>
        </div>
        <!-- 제목 입력 -->
        <header class="mb-4">
          <input type="text" class="form-control" placeholder="제목" id="title" th:value="${article.title}">
        </header>
        <section class="mb-5">
          <textarea class="form-control h-25" rows="10" placeholder="내용" id="content" th:text="${article.content}"></textarea>
        </section>
        <form method="post" action="/articles" enctype="multipart/form-data">
          <input type="file" name="image"><br>
        </form>
        <button th:if="${article.id} != null" type="button" id="modify-btn" class="btn btn-primary btn-sm">수정</button>
        <button th:if="${article.id} == null" type="button" id="create-btn" class="btn btn-primary btn-sm">등록</button>
      </article>
    </div>
  </div>
</div>

<script src="/js/article.js"></script>
</body>