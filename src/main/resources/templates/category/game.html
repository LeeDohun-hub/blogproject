<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Coupe's log</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <style>
        .top-bar {
        position: absolute;
        top: 15px;
        right: 20px;
        }
        .nav-links {
        display: flex;
        align-items: center;
        gap: 20px;
        }

    .nav-link {
      color: white;
      text-decoration: none;
      font-weight: 500;
      font-size: 1rem;
      border-bottom: 2px solid transparent;
      transition: border-color 0.2s;
      background: none;
      padding: 0;
    }

    .nav-link:hover {
      border-bottom: 2px solid white;
    }

    /* 버튼을 링크처럼 보이게 (로그아웃 버튼 전용) */
    .btn-link {
      background: none;
      border: none;
      cursor: pointer;
    }
        /* 카테고리 스타일 (HongLab 참고) */
        .category-link {
          color: white;
          text-decoration: none;
          padding: 5px 0;
          border-bottom: 2px solid transparent;
          transition: border-color 0.2s;
        }
        .category-link:hover {
          border-bottom: 2px solid white;
        }

        /* 로그인/로그아웃 버튼 */
        .auth-btn {
          background: none;
          border: none;
          font-weight: 600;
          cursor: pointer;
          padding: 0;
        }
        .auth-btn:hover {
          color: #ffaa33;
          text-decoration: underline;
        }
         /* 좌측 상세 카테고리 */
        .sub-category {
            list-style: none;
            padding: 0;
        }
        .sub-category li {
            margin-bottom: 10px;
        }
        .sub-category a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
        }
        .sub-category a:hover {
            color: #007bff;
        }
    </style>
</head>
<body>
<div class="p-5 mb-5 text-white bg-dark position-relative"
     style="background: url('/images/logo2.jpg') no-repeat center center/cover; height: 250px;">

    <div class="top-bar">
        <!-- 카테고리 링크 + 로그인/로그아웃 버튼 묶음 -->
        <div class="nav-links">
            <!-- 카테고리 링크 -->
            <a th:each="cat : ${categories}"
               th:href="@{/category/{c}(c=${cat})}"
               th:text="${cat.label}"
               class="nav-link">
            </a>

            <!-- 로그인 상태일 때만 로그아웃 -->
            <div sec:authorize="isAuthenticated()">
                <form th:action="@{/logout}" method="post" style="display:inline;">
                    <button type="submit" class="nav-link btn-link">로그아웃</button>
                </form>
            </div>

            <!-- 로그아웃 상태일 때만 로그인 -->
            <div sec:authorize="isAnonymous()">
                <a th:href="@{/login}" class="nav-link">로그인</a>
            </div>
        </div>
    </div>


    <!-- 가운데 로고/타이틀 -->
    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
        <h1 class="mb-3">
            <a th:href="@{/ }" style="color: white; text-decoration: none;">Coupelog</a>
        </h1>
        <h4 class="mb-3">Game, Dev, Sports, etc...</h4>
    </div>
</div>

<div class="container">
    <!-- 글 등록 버튼 (로그인 되어 있을 때만 보이도록 설정) -->
    <button th:if="${#authentication != null and #authentication.authenticated}"
            type="button" id="create-btn"
            th:onclick="|location.href='@{/new-article}'|"
            class="btn btn-secondary btn-sm mb-3">글 등록</button>
    <div class="row">
        <!-- 좌측 상세 카테고리 -->
        <div class="col-md-3">
            <h5>상세 카테고리</h5>
            <ul class="sub-category">
                <li><a href="#">비디오게임(PS/NS)</a></li>
                <li><a href="#">모바일</a></li>
                <li><a href="#">고전게임</a></li>
                <li><a href="#">그 외</a></li>
            </ul>
        </div>

        <!-- 우측 게시글 카드 -->
        <div class="col-md-9">
            <div class="row" th:each="item : ${articles}">
                <div class="col-md-4 mb-3">
                    <div class="card">
                        <div class="card-header" th:text="${item.id}"></div>
                        <div class="card-body">
                            <h5 class="card-title" th:text="${item.title}"></h5>
                            <p class="card-text" th:text="${item.content}"></p>
                            <a th:href="@{/articles/{id}(id=${item.id})}" class="btn btn-primary">보러가기</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="/js/article.js"></script>
</body>
</html>
